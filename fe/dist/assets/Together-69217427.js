import{_ as rt,u as st,d as K,o as ot,f as Q,i as Z,b as lt,F as ut,t as q}from"./index-e67bbfbf.js";import{a as dt}from"./axios-9cbf0d09.js";import{c as tt,A as O,p as mt,a as pt,s as ct,i as ht}from"./sidebar-a809c39c.js";import{c as et,g as ft}from"./_commonjsHelpers-725317a4.js";import{S as gt}from"./sweetalert2.all-f30fcc53.js";var L={exports:{}};/*!
 * artplayer-plugin-danmuku.js v5.0.1
 * Github: https://github.com/zhw2590582/ArtPlayer
 * (c) 2017-2023 Harvey Zack
 * Released under the MIT License.
 */L.exports;(function(E,V){(function(p,y,c,r,o){var d=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof et<"u"?et:{},k=typeof d[r]=="function"&&d[r],m=k.cache||{},g=typeof tt=="function"&&tt.bind(E);function t(n,a){if(!m[n]){if(!p[n]){var s=typeof d[r]=="function"&&d[r];if(!a&&s)return s(n,!0);if(k)return k(n,!0);if(g&&typeof n=="string")return g(n);var u=new Error("Cannot find module '"+n+"'");throw u.code="MODULE_NOT_FOUND",u}v.resolve=function($){var x=p[n][1][$];return x??$},v.cache={};var l=m[n]=new t.Module(n);p[n][0].call(l.exports,v,l,l.exports,this)}return m[n].exports;function v($){var x=v.resolve($);return x===!1?{}:t(x)}}t.isParcelRequire=!0,t.Module=function(n){this.id=n,this.bundle=t,this.exports={}},t.modules=p,t.cache=m,t.parent=k,t.register=function(n,a){p[n]=[function(s,u){u.exports=a},{}]},Object.defineProperty(t,"root",{get:function(){return d[r]}}),d[r]=t;for(var e=0;e<y.length;e++)t(y[e]);if(c){var i=t(c);E.exports=i}})({bgm6t:[function(p,y,c){var r=p("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(c);var o=p("./danmuku"),d=r.interopDefault(o),k=p("./setting"),m=r.interopDefault(k),g=p("./heatmap"),t=r.interopDefault(g);function e(i){return n=>{(function(s){const{version:u,utils:{errorHandle:l}}=s.constructor,v=u.split(".").map(Number);l(v[0]+v[1]/100>=5,`Artplayer.js@${u} 不兼容该弹幕库，请更新到 Artplayer.js@5.x.x 版本以上`)})(n);const a=new d.default(n,i);return(0,m.default)(n,a),i.heatmap&&!n.option.isLive&&(0,t.default)(n,a,i.heatmap),{name:"artplayerPluginDanmuku",emit:a.emit.bind(a),load:a.load.bind(a),config:a.config.bind(a),hide:a.hide.bind(a),show:a.show.bind(a),reset:a.reset.bind(a),get option(){return a.option},get isHide(){return a.isHide},get isStop(){return a.isStop}}}}c.default=e,e.env="production",e.version="5.0.1",e.build="2023-05-03 11:57:31",typeof window<"u"&&(window.artplayerPluginDanmuku=e)},{"./danmuku":"4ns48","./setting":"lO8OT","./heatmap":"8AxLD","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"4ns48":[function(p,y,c){var r=p("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(c);var o=p("./bilibili"),d=p("./getDanmuTop"),k=r.interopDefault(d);class m{constructor(t,e){const{constructor:i,template:n}=t;if(this.utils=i.utils,this.validator=i.validator,this.$danmuku=n.$danmuku,this.$player=n.$player,this.art=t,this.danmus=[],this.queue=[],this.option={},this.$refs=[],this.isStop=!1,this.isHide=!1,this.timer=null,this.config(e),this.option.useWorker)try{this.worker=new Worker(p("12ceab24749100d0"))}catch{}this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.reset=this.reset.bind(this),this.destroy=this.destroy.bind(this),t.on("video:play",this.start),t.on("video:playing",this.start),t.on("video:pause",this.stop),t.on("video:waiting",this.stop),t.on("resize",this.reset),t.on("destroy",this.destroy),this.load()}static get option(){return{danmuku:[],speed:5,margin:["2%","25%"],opacity:1,color:"#FFFFFF",mode:0,fontSize:25,filter:()=>!0,antiOverlap:!0,useWorker:!0,synchronousPlayback:!1,lockTime:5,maxLength:100,minWidth:200,maxWidth:400,mount:void 0,theme:"dark",heatmap:!1,beforeEmit:()=>!0}}static get scheme(){return{danmuku:"array|function|string",speed:"number",margin:"array",opacity:"number",color:"string",mode:"number",fontSize:"number|string",filter:"function",antiOverlap:"boolean",useWorker:"boolean",synchronousPlayback:"boolean",lockTime:"number",maxLength:"number",minWidth:"number",maxWidth:"number",mount:"undefined|htmldivelement",theme:"string",heatmap:"object|boolean",beforeEmit:"function"}}get isRotate(){return this.art.plugins.autoOrientation&&this.art.plugins.autoOrientation.state}get marginTop(){const{clamp:t}=this.utils,e=this.option.margin[0],{clientHeight:i}=this.$player;return typeof e=="number"?t(e,0,i):typeof e=="string"&&e.endsWith("%")?t(i*(parseFloat(e)/100),0,i):m.option.margin[0]}get marginBottom(){const{clamp:t}=this.utils,e=this.option.margin[1],{clientHeight:i}=this.$player;return typeof e=="number"?t(e,0,i):typeof e=="string"&&e.endsWith("%")?t(i*(parseFloat(e)/100),0,i):m.option.margin[1]}filter(t,e){return this.queue.filter(i=>i.$state===t).map(e)}getLeft(t){const e=t.getBoundingClientRect();return this.isRotate?e.top:e.left}getRef(){const t=this.$refs.pop();if(t)return t;const e=document.createElement("div");return e.style.cssText=`
            user-select: none;
            position: absolute;
            white-space: pre;
            pointer-events: none;
            perspective: 500px;
            display: inline-block;
            will-change: transform;
            font-weight: normal;
            line-height: 1.125;
            visibility: hidden;
            font-family: SimHei, "Microsoft JhengHei", Arial, Helvetica, sans-serif;
            text-shadow: rgb(0, 0, 0) 1px 0px 1px, rgb(0, 0, 0) 0px 1px 1px, rgb(0, 0, 0) 0px -1px 1px, rgb(0, 0, 0) -1px 0px 1px;
        `,e}getReady(){const{currentTime:t}=this.art;return this.queue.filter(e=>e.$state==="ready"||e.$state==="wait"&&t+.1>=e.time&&e.time>=t-.1)}getEmits(){const t=[],{clientWidth:e}=this.$player,i=this.getLeft(this.$player);return this.filter("emit",n=>{const a=n.$ref.offsetTop,s=this.getLeft(n.$ref)-i,u=n.$ref.clientHeight,l=n.$ref.clientWidth,v=s+l,$=e-v,x=v/n.$restTime,C={};C.top=a,C.left=s,C.height=u,C.width=l,C.right=$,C.speed=x,C.distance=v,C.time=n.$restTime,C.mode=n.mode,t.push(C)}),t}getFontSize(t){const{clamp:e}=this.utils,{clientHeight:i}=this.$player;return typeof t=="number"?e(t,12,i):typeof t=="string"&&t.endsWith("%")?e(i*(parseFloat(t)/100),12,i):m.option.fontSize}postMessage(t={}){return new Promise(e=>{if(this.option.useWorker&&this.worker&&this.worker.postMessage)t.id=Date.now(),this.worker.postMessage(t),this.worker.onmessage=i=>{const{data:n}=i;n.id===t.id&&e(n)};else{const i=(0,k.default)(t);e({top:i})}})}async load(){try{typeof this.option.danmuku=="function"?this.danmus=await this.option.danmuku():typeof this.option.danmuku.then=="function"?this.danmus=await this.option.danmuku:typeof this.option.danmuku=="string"?this.danmus=await(0,o.bilibiliDanmuParseFromUrl)(this.option.danmuku):this.danmus=this.option.danmuku,this.utils.errorHandle(Array.isArray(this.danmus),"Danmuku need return an array as result"),this.art.emit("artplayerPluginDanmuku:loaded",this.danmus),this.queue=[],this.$danmuku.innerText="",this.danmus.forEach(t=>this.emit(t))}catch(t){throw this.art.emit("artplayerPluginDanmuku:error",t),t}return this}config(t){const{clamp:e}=this.utils;return this.option=Object.assign({},m.option,this.option,t),this.validator(this.option,m.scheme),this.option.speed=e(this.option.speed,1,10),this.option.opacity=e(this.option.opacity,0,1),this.option.lockTime=e(Math.floor(this.option.lockTime),0,60),this.option.maxLength=e(this.option.maxLength,0,500),this.option.minWidth=e(this.option.minWidth,0,500),this.option.maxWidth=e(this.option.maxWidth,0,1/0),t.fontSize&&(this.option.fontSize=this.getFontSize(this.option.fontSize),this.reset()),this.art.emit("artplayerPluginDanmuku:config",this.option),this}makeWait(t){t.$state="wait",t.$ref&&(t.$ref.style.visibility="hidden",t.$ref.style.marginLeft="0px",t.$ref.style.transform="translateX(0px)",t.$ref.style.transition="transform 0s linear 0s",this.$refs.push(t.$ref),t.$ref=null)}continue(){const{clientWidth:t}=this.$player;return this.filter("stop",e=>{switch(e.$state="emit",e.$lastStartTime=Date.now(),e.mode){case 0:{const i=t+e.$ref.clientWidth;e.$ref.style.transform=`translateX(${-i}px)`,e.$ref.style.transition=`transform ${e.$restTime}s linear 0s`;break}}}),this}suspend(){const{clientWidth:t}=this.$player;return this.filter("emit",e=>{switch(e.$state="stop",e.mode){case 0:{const i=t-(this.getLeft(e.$ref)-this.getLeft(this.$player));e.$ref.style.transform=`translateX(${-i}px)`,e.$ref.style.transition="transform 0s linear 0s";break}}}),this}reset(){return this.queue.forEach(t=>this.makeWait(t)),this}update(){return this.timer=window.requestAnimationFrame(async()=>{if(this.art.playing&&!this.isHide){this.filter("emit",n=>{const a=(Date.now()-n.$lastStartTime)/1e3;n.$restTime-=a,n.$lastStartTime=Date.now(),n.$restTime<=0&&this.makeWait(n)});const t=this.getReady(),{clientWidth:e,clientHeight:i}=this.$player;for(let n=0;n<t.length;n++){const a=t[n];a.$ref=this.getRef(),a.$ref.innerText=a.text,this.$danmuku.appendChild(a.$ref),a.$ref.style.left=`${e}px`,a.$ref.style.opacity=this.option.opacity,a.$ref.style.fontSize=`${this.option.fontSize}px`,a.$ref.style.color=a.color,a.$ref.style.border=a.border?`1px solid ${a.color}`:null,a.$ref.style.backgroundColor=a.border?"rgb(0 0 0 / 50%)":null,a.$ref.style.marginLeft="0px",a.$lastStartTime=Date.now(),a.$restTime=this.option.synchronousPlayback&&this.art.playbackRate?this.option.speed/Number(this.art.playbackRate):this.option.speed;const s={mode:a.mode,height:a.$ref.clientHeight,speed:(e+a.$ref.clientWidth)/a.$restTime},{top:u}=await this.postMessage({target:s,emits:this.getEmits(),antiOverlap:this.option.antiOverlap,clientWidth:e,clientHeight:i,marginBottom:this.marginBottom,marginTop:this.marginTop});if(a.$ref)if(this.isStop||u===void 0)a.$state="ready",this.$refs.push(a.$ref),a.$ref=null;else switch(a.$state="emit",a.$ref.style.visibility="visible",a.mode){case 0:{a.$ref.style.top=`${u}px`;const l=e+a.$ref.clientWidth;a.$ref.style.transform=`translateX(${-l}px)`,a.$ref.style.transition=`transform ${a.$restTime}s linear 0s`;break}case 1:a.$ref.style.left="50%",a.$ref.style.top=`${u}px`,a.$ref.style.marginLeft=`-${a.$ref.clientWidth/2}px`}}}this.isStop||this.update()}),this}stop(){return this.isStop=!0,this.suspend(),window.cancelAnimationFrame(this.timer),this.art.emit("artplayerPluginDanmuku:stop"),this}start(){return this.isStop=!1,this.continue(),this.update(),this.art.emit("artplayerPluginDanmuku:start"),this}show(){return this.isHide=!1,this.start(),this.$danmuku.style.display="block",this.art.emit("artplayerPluginDanmuku:show"),this}hide(){return this.isHide=!0,this.stop(),this.queue.forEach(t=>this.makeWait(t)),this.$danmuku.style.display="none",this.art.emit("artplayerPluginDanmuku:hide"),this}emit(t){return this.validator(t,{text:"string",mode:"number|undefined",color:"string|undefined",time:"number|undefined",border:"boolean|undefined"}),t.text.trim()&&this.option.filter(t)?(t.time?t.time=this.utils.clamp(t.time,0,1/0):t.time=this.art.currentTime+.5,t.mode===void 0&&(t.mode=this.option.mode),t.color===void 0&&(t.color=this.option.color),this.queue.push({...t,$state:"wait",$ref:null,$restTime:0,$lastStartTime:0}),this):this}destroy(){this.stop(),this.worker&&this.worker.terminate&&this.worker.terminate(),this.art.off("video:play",this.start),this.art.off("video:playing",this.start),this.art.off("video:pause",this.stop),this.art.off("video:waiting",this.stop),this.art.off("resize",this.reset),this.art.off("destroy",this.destroy),this.art.emit("artplayerPluginDanmuku:destroy")}}c.default=m},{"./bilibili":"f83sx","./getDanmuTop":"jPSuD","12ceab24749100d0":"fXq73","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],f83sx:[function(p,y,c){var r=p("@parcel/transformer-js/src/esmodule-helpers.js");function o(m){switch(m){case 1:case 2:case 3:default:return 0;case 4:case 5:return 1}}function d(m){if(typeof m!="string")return[];const g=m.matchAll(/<d (?:.*? )??p="(?<p>.+?)"(?: .*?)?>(?<text>.+?)<\/d>/gs);return Array.from(g).map(t=>{const e=t.groups.p.split(",");return e.length>=8?{text:t.groups.text.trim().replaceAll("&quot;",'"').replaceAll("&apos;","'").replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&amp;","&"),time:Number(e[0]),mode:o(Number(e[1])),fontSize:Number(e[2]),color:`#${Number(e[3]).toString(16)}`,timestamp:Number(e[4]),pool:Number(e[5]),userID:e[6],rowID:Number(e[7])}:null}).filter(Boolean)}function k(m){return fetch(m).then(g=>g.text()).then(g=>d(g))}r.defineInteropFlag(c),r.export(c,"getMode",()=>o),r.export(c,"bilibiliDanmuParseFromXml",()=>d),r.export(c,"bilibiliDanmuParseFromUrl",()=>k)},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],"9pCYc":[function(p,y,c){c.interopDefault=function(r){return r&&r.__esModule?r:{default:r}},c.defineInteropFlag=function(r){Object.defineProperty(r,"__esModule",{value:!0})},c.exportAll=function(r,o){return Object.keys(r).forEach(function(d){d==="default"||d==="__esModule"||o.hasOwnProperty(d)||Object.defineProperty(o,d,{enumerable:!0,get:function(){return r[d]}})}),o},c.export=function(r,o,d){Object.defineProperty(r,o,{enumerable:!0,get:d})}},{}],jPSuD:[function(p,y,c){p("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(c),c.default=function({target:r,emits:o,clientWidth:d,clientHeight:k,marginBottom:m,marginTop:g,antiOverlap:t}){const e=o.filter(n=>n.mode===r.mode&&n.top<=k-m).sort((n,a)=>n.top-a.top);if(e.length===0)return g;e.unshift({top:0,left:0,right:0,height:g,width:d,speed:0,distance:d}),e.push({top:k-m,left:0,right:0,height:m,width:d,speed:0,distance:d});for(let n=1;n<e.length;n+=1){const a=e[n],s=e[n-1],u=s.top+s.height;if(a.top-u>=r.height)return u}const i=[];for(let n=1;n<e.length-1;n+=1){const a=e[n];if(i.length){const s=i[i.length-1];s[0].top===a.top?s.push(a):i.push([a])}else i.push([a])}if(!t){switch(r.mode){case 0:i.sort((n,a)=>{const s=Math.min(...a.map(l=>l.right)),u=Math.min(...n.map(l=>l.right));return s*a.length-u*n.length});break;case 1:i.sort((n,a)=>{const s=Math.max(...a.map(u=>u.width));return Math.max(...n.map(u=>u.width))*n.length-s*a.length})}return i[0][0].top}switch(r.mode){case 0:{const n=i.find(a=>a.every(s=>d<s.distance?!1:r.speed<s.speed?!0:s.right/(r.speed-s.speed)>s.time));return n&&n[0]?n[0].top:void 0}case 1:return}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],fXq73:[function(p,y,c){y.exports="data:application/javascript,function%20getDanmuTop%28%7Btarget%3At%2Cemits%3Ae%2CclientWidth%3An%2CclientHeight%3Ai%2CmarginBottom%3As%2CmarginTop%3Ah%2CantiOverlap%3Ao%7D%29%7Bconst%20r%3De.filter%28%28e%3D%3Ee.mode%3D%3D%3Dt.mode%26%26e.top%3C%3Di-s%29%29.sort%28%28%28t%2Ce%29%3D%3Et.top-e.top%29%29%3Bif%280%3D%3D%3Dr.length%29return%20h%3Br.unshift%28%7Btop%3A0%2Cleft%3A0%2Cright%3A0%2Cheight%3Ah%2Cwidth%3An%2Cspeed%3A0%2Cdistance%3An%7D%29%2Cr.push%28%7Btop%3Ai-s%2Cleft%3A0%2Cright%3A0%2Cheight%3As%2Cwidth%3An%2Cspeed%3A0%2Cdistance%3An%7D%29%3Bfor%28let%20e%3D1%3Be%3Cr.length%3Be%2B%3D1%29%7Bconst%20n%3Dr%5Be%5D%2Ci%3Dr%5Be-1%5D%2Cs%3Di.top%2Bi.height%3Bif%28n.top-s%3E%3Dt.height%29return%20s%7Dconst%20p%3D%5B%5D%3Bfor%28let%20t%3D1%3Bt%3Cr.length-1%3Bt%2B%3D1%29%7Bconst%20e%3Dr%5Bt%5D%3Bif%28p.length%29%7Bconst%20t%3Dp%5Bp.length-1%5D%3Bt%5B0%5D.top%3D%3D%3De.top%3Ft.push%28e%29%3Ap.push%28%5Be%5D%29%7Delse%20p.push%28%5Be%5D%29%7Dif%28%21o%29%7Bswitch%28t.mode%29%7Bcase%200%3Ap.sort%28%28%28t%2Ce%29%3D%3E%7Bconst%20n%3DMath.min%28...e.map%28%28t%3D%3Et.right%29%29%29%2Ci%3DMath.min%28...t.map%28%28t%3D%3Et.right%29%29%29%3Breturn%20n%2ae.length-i%2at.length%7D%29%29%3Bbreak%3Bcase%201%3Ap.sort%28%28%28t%2Ce%29%3D%3E%7Bconst%20n%3DMath.max%28...e.map%28%28t%3D%3Et.width%29%29%29%3Breturn%20Math.max%28...t.map%28%28t%3D%3Et.width%29%29%29%2at.length-n%2ae.length%7D%29%29%7Dreturn%20p%5B0%5D%5B0%5D.top%7Dswitch%28t.mode%29%7Bcase%200%3A%7Bconst%20e%3Dp.find%28%28e%3D%3Ee.every%28%28e%3D%3E%7Bif%28n%3Ce.distance%29return%211%3Bif%28t.speed%3Ce.speed%29return%210%3Breturn%20e.right%2F%28t.speed-e.speed%29%3Ee.time%7D%29%29%29%29%3Breturn%20e%26%26e%5B0%5D%3Fe%5B0%5D.top%3Avoid%200%7Dcase%201%3Areturn%7D%7Donmessage%3Dt%3D%3E%7Bconst%7Bdata%3Ae%7D%3Dt%2Cn%3DgetDanmuTop%28e%29%3Bself.postMessage%28%7Btop%3An%2Cid%3Ae.id%7D%29%7D%3B"},{}],lO8OT:[function(p,y,c){var r=p("@parcel/transformer-js/src/esmodule-helpers.js");r.defineInteropFlag(c);var o=p("bundle-text:./style.less"),d=r.interopDefault(o),k=p("bundle-text:./img/danmu-on.svg"),m=r.interopDefault(k),g=p("bundle-text:./img/danmu-off.svg"),t=r.interopDefault(g),e=p("bundle-text:./img/danmu-config.svg"),i=r.interopDefault(e),n=p("bundle-text:./img/danmu-style.svg"),a=r.interopDefault(n);if(c.default=function(s,u){const{option:l}=u,{template:{$controlsCenter:v,$player:$},constructor:{SETTING_ITEM_WIDTH:x,utils:{removeClass:C,addClass:z,append:S,setStyle:h,tooltip:M,query:w,inverseClass:H,getIcon:T}}}=s;h(v,"display","flex");const A=T("danmu-on",m.default),B=T("danmu-off",t.default),j=T("danmu-config",i.default),F=T("danmu-style",a.default);(function(){const f=["#FE0302","#FF7204","#FFAA02","#FFD302","#FFFF00","#A0EE00","#00CD00","#019899","#4266BE","#89D5FF","#CC0273","#222222","#9B9B9B","#FFFFFF"].map(b=>`<div class="art-danmuku-style-panel-color${l.color===b?" art-current":""}" data-color="${b}" style="background-color:${b}"></div>`),D=S(v,`<div class="art-danmuku-emitter" style="max-width: ${l.maxWidth?`${l.maxWidth}px`:"100%"}"><div class="art-danmuku-left"><div class="art-danmuku-style"><div class="art-danmuku-style-panel"><div class="art-danmuku-style-panel-inner"><div class="art-danmuku-style-panel-title">模式</div><div class="art-danmuku-style-panel-modes"><div class="art-danmuku-style-panel-mode art-current" data-mode="0">滚动</div><div class="art-danmuku-style-panel-mode" data-mode="1">静止</div></div><div class="art-danmuku-style-panel-title">颜色</div><div class="art-danmuku-style-panel-colors">${f.join("")}</div></div></div></div><input class="art-danmuku-input" maxlength="${l.maxLength}" placeholder="发个弹幕见证当下" /></div><div class="art-danmuku-send">发送</div></div>`),_=w(".art-danmuku-style",D),I=w(".art-danmuku-input",D),P=w(".art-danmuku-send",D),at=w(".art-danmuku-style-panel-inner",D),nt=w(".art-danmuku-style-panel-modes",D),it=w(".art-danmuku-style-panel-colors",D),N=l.mount||S($,'<div class="art-layer-danmuku-emitter"></div>');s.option.backdrop&&z(at,"art-backdrop-filter"),l.theme&&z(D,`art-danmuku-theme-${l.theme}`);let R=null,U=l.mode,X=l.color;function Y(b){b<=0?(R=null,P.innerText="发送",C(P,"art-disabled")):(P.innerText=b,R=setTimeout(()=>Y(b-1),1e3))}function G(){const b={mode:U,color:X,border:!0,text:I.value.trim()};R===null&&l.beforeEmit(b)&&(I.value="",u.emit(b),z(P,"art-disabled"),Y(l.lockTime),s.emit("artplayerPluginDanmuku:emit",b))}function J(){v.clientWidth<l.minWidth?(S(N,D),h(N,"display","flex"),z(D,"art-danmuku-mount"),l.mount||h($,"marginBottom","40px")):(S(v,D),h(N,"display","none"),C(D,"art-danmuku-mount"),l.mount||h($,"marginBottom",null))}S(_,F),s.proxy(P,"click",G),s.proxy(I,"keypress",b=>{b.key==="Enter"&&(b.preventDefault(),G())}),s.proxy(nt,"click",b=>{const{dataset:W}=b.target;W.mode&&(U=Number(W.mode),H(b.target,"art-current"))}),s.proxy(it,"click",b=>{const{dataset:W}=b.target;W.color&&(X=W.color,H(b.target,"art-current"))}),J(),s.on("resize",()=>{s.isInput||J()}),s.on("destroy",()=>{l.mount&&D.parentElement===l.mount&&l.mount.removeChild(D)})})(),s.controls.add({position:"right",name:"danmuku",click:function(){u.isHide?(u.show(),s.notice.show="弹幕显示",h(A,"display",null),h(B,"display","none")):(u.hide(),s.notice.show="弹幕隐藏",h(A,"display","none"),h(B,"display",null))},mounted(f){S(f,A),S(f,B),M(f,"弹幕开关"),h(B,"display","none"),s.on("artplayerPluginDanmuku:hide",()=>{h(A,"display","none"),h(B,"display",null)}),s.on("artplayerPluginDanmuku:show",()=>{h(A,"display",null),h(B,"display","none")})}}),s.setting.add({width:260,name:"danmuku",html:"弹幕设置",tooltip:"更多",icon:j,selector:[{width:x,html:"播放速度",icon:"",tooltip:"适中",selector:[{html:"极慢",time:10},{html:"较慢",time:7.5},{default:!0,html:"适中",time:5},{html:"较快",time:2.5},{html:"极快",time:1}],onSelect:function(f){return u.config({speed:f.time}),f.html}},{width:x,html:"字体大小",icon:"",tooltip:"适中",selector:[{html:"极小",fontSize:"4%"},{html:"较小",fontSize:"5%"},{default:!0,html:"适中",fontSize:"6%"},{html:"较大",fontSize:"7%"},{html:"极大",fontSize:"8%"}],onSelect:function(f){return u.config({fontSize:f.fontSize}),f.html}},{width:x,html:"不透明度",icon:"",tooltip:"100%",selector:[{default:!0,opacity:1,html:"100%"},{opacity:.75,html:"75%"},{opacity:.5,html:"50%"},{opacity:.25,html:"25%"},{opacity:0,html:"0%"}],onSelect:function(f){return u.config({opacity:f.opacity}),f.html}},{width:x,html:"显示范围",icon:"",tooltip:"3/4",selector:[{html:"1/4",margin:[10,"75%"]},{html:"半屏",margin:[10,"50%"]},{default:!0,html:"3/4",margin:[10,"25%"]},{html:"满屏",margin:[10,10]}],onSelect:function(f){return u.config({margin:f.margin}),f.html}},{html:"弹幕防重叠",icon:"",tooltip:l.antiOverlap?"开启":"关闭",switch:l.antiOverlap,onSwitch:f=>(u.config({antiOverlap:!f.switch}),f.tooltip=f.switch?"关闭":"开启",!f.switch)},{html:"同步视频速度",icon:"",tooltip:l.synchronousPlayback?"开启":"关闭",switch:l.synchronousPlayback,onSwitch:f=>(u.config({synchronousPlayback:!f.switch}),f.tooltip=f.switch?"关闭":"开启",!f.switch)}]})},typeof document<"u"&&!document.getElementById("artplayer-plugin-danmuku")){const s=document.createElement("style");s.id="artplayer-plugin-danmuku",s.textContent=d.default,document.head.appendChild(s)}},{"bundle-text:./style.less":"hViDo","bundle-text:./img/danmu-on.svg":"4KfW9","bundle-text:./img/danmu-off.svg":"9UR3U","bundle-text:./img/danmu-config.svg":"4MPCW","bundle-text:./img/danmu-style.svg":"7lV5Q","@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}],hViDo:[function(p,y,c){y.exports='.art-danmuku-emitter{height:32px;width:100%;max-width:100%;background-color:#ffffff4d;border-radius:5px;font-size:12px;line-height:1;display:flex;position:relative}.art-danmuku-emitter .art-backdrop-filter{-webkit-backdrop-filter:saturate(180%)blur(20px);backdrop-filter:saturate(180%)blur(20px);background-color:#000000b3!important}.art-danmuku-emitter .art-danmuku-left{border-radius:3px 0 0 3px;flex:1;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style{width:32px;justify-content:center;align-items:center;display:flex;position:relative}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel{z-index:999;width:200px;padding-bottom:10px;display:none;position:absolute;bottom:30px;left:-85px}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner{background-color:#000000e6;border-radius:3px;flex-direction:column;padding:10px 10px 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-title{margin-bottom:10px;font-size:13px}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes{justify-content:space-between;margin-bottom:15px;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes .art-danmuku-style-panel-mode{width:47%;cursor:pointer;color:#fff;border:1px solid #fff;justify-content:center;padding:5px 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-modes .art-danmuku-style-panel-mode.art-current{background-color:#00a1d6;border:1px solid #00a1d6}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors{flex-wrap:wrap;justify-content:space-between;gap:5px;margin-bottom:10px;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color{cursor:pointer;width:20px;height:20px;border:1px solid #fff}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color.art-current{position:relative;box-shadow:0 0 2px #fff}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel .art-danmuku-style-panel-inner .art-danmuku-style-panel-colors .art-danmuku-style-panel-color.art-current:before{content:"";width:100%;height:100%;border:2px solid #000;position:absolute;inset:0}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style:hover .art-danmuku-style-panel{display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-icon{opacity:.75;cursor:pointer}.art-danmuku-emitter .art-danmuku-left .art-danmuku-style .art-icon:hover{opacity:1}.art-danmuku-emitter .art-danmuku-left .art-danmuku-input{width:100%;color:#fff;background-color:#0000;border:none;outline:none;flex:1;padding:0 10px 0 0;display:flex}.art-danmuku-emitter .art-danmuku-left .art-danmuku-input::placeholder,.art-danmuku-emitter .art-danmuku-left .art-danmuku-input::-webkit-input-placeholder{color:#ffffff80}.art-danmuku-emitter .art-danmuku-send{width:50px;cursor:pointer;background-color:#00a1d6;border-radius:0 5px 5px 0;justify-content:center;align-items:center;display:flex}.art-danmuku-emitter .art-danmuku-send:hover{background-color:#00b5e5}.art-danmuku-emitter .art-danmuku-send.art-disabled{opacity:.5;pointer-events:none}.art-danmuku-emitter.art-danmuku-mount{max-width:100%!important}.art-danmuku-emitter.art-danmuku-mount .art-danmuku-left .art-danmuku-style .art-danmuku-style-panel{left:0}.art-danmuku-emitter.art-danmuku-mount .art-danmuku-send{width:60px}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left{background:#f4f4f4;border:1px solid #dadada}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-style .art-icon svg{fill:#666}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input{color:#000}.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input::placeholder,.art-danmuku-emitter.art-danmuku-mount.art-danmuku-theme-light .art-danmuku-left .art-danmuku-input::-webkit-input-placeholder{color:#00000080}.art-layer-danmuku-emitter{z-index:99;width:100%;position:absolute;bottom:-40px;left:0;right:0}'},{}],"4KfW9":[function(p,y,c){y.exports='<svg viewBox="0 0 1152 1024" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M311.467 661.333c0 4.267-4.267 8.534-8.534 12.8 0 4.267 0 4.267-4.266 8.534h-12.8c-4.267 0-8.534-4.267-17.067-8.534-8.533-8.533-17.067-8.533-25.6-8.533-8.533 0-12.8 4.267-17.067 12.8-4.266 12.8-8.533 21.333-4.266 29.867 4.266 8.533 12.8 17.066 25.6 21.333 17.066 8.533 34.133 17.067 46.933 17.067 12.8 0 21.333-4.267 34.133-8.534 8.534-4.266 17.067-17.066 25.6-29.866 8.534-12.8 12.8-34.134 17.067-55.467 4.267-21.333 4.267-51.2 4.267-85.333 0-12.8 0-21.334-4.267-29.867 0-8.533-4.267-12.8-8.533-17.067-4.267-4.266-8.534-8.533-12.8-8.533-4.267 0-12.8-4.267-21.334-4.267h-55.466s-4.267-4.266 0-8.533l4.266-38.4c0-4.267 0-8.533 4.267-8.533h46.933c17.067 0 25.6-4.267 34.134-12.8 8.533-8.534 12.8-21.334 12.8-42.667v-72.533c0-17.067-4.267-34.134-8.534-42.667-12.8-12.8-25.6-17.067-42.666-17.067H243.2c-8.533 0-17.067 0-21.333 4.267-4.267 8.533-4.267 12.8-4.267 25.6 0 8.533 0 17.067 4.267 21.333 4.266 4.267 12.8 8.534 21.333 8.534h64c4.267 0 8.533 0 8.533 4.266v34.134c0 8.533 0 12.8-4.266 12.8 0 0-4.267 4.266-8.534 4.266H268.8c-8.533 0-12.8 0-21.333 4.267-4.267 0-8.534 4.267-8.534 4.267-4.266 4.266-8.533 12.8-8.533 17.066 0 8.534-4.267 17.067-4.267 25.6l-8.533 72.534v29.866c0 8.534 4.267 12.8 8.533 17.067 4.267 4.267 8.534 4.267 17.067 8.533h68.267c4.266 0 8.533 0 8.533 4.267s4.267 8.533 4.267 17.067c0 21.333 0 42.666-4.267 55.466 0 8.534-4.267 21.334-8.533 25.6zM896 486.4c-93.867 0-174.933 51.2-217.6 123.733H571.733V576H640c21.333 0 34.133-4.267 42.667-12.8 8.533-8.533 12.8-21.333 12.8-42.667V358.4c0-21.333-4.267-34.133-12.8-42.667-8.534-8.533-21.334-12.8-42.667-12.8 0-4.266 4.267-4.266 4.267-8.533-4.267 0-4.267-4.267-4.267-4.267 4.267-12.8 8.533-21.333 4.267-25.6 0-8.533-4.267-12.8-12.8-21.333-8.534-4.267-17.067-4.267-21.334-4.267-8.533 4.267-12.8 8.534-21.333 21.334-4.267 8.533-8.533 12.8-12.8 21.333-4.267 8.533-8.533 12.8-12.8 21.333H512c-4.267-8.533-8.533-17.066-8.533-21.333-4.267-8.533-8.534-12.8-12.8-21.333-4.267-12.8-12.8-17.067-21.334-17.067s-17.066 0-25.6 8.533c-8.533 8.534-12.8 12.8-12.8 21.334s0 17.066 8.534 25.6l4.266 4.266L448 307.2c-17.067 0-29.867 4.267-38.4 12.8-8.533 4.267-12.8 21.333-12.8 38.4v157.867c0 21.333 4.267 34.133 12.8 42.666 8.533 8.534 21.333 12.8 42.667 12.8H512v34.134h-98.133c-12.8 0-21.334 0-25.6 4.266-4.267 4.267-8.534 8.534-8.534 21.334v17.066c0 4.267 4.267 8.534 4.267 8.534 4.267 0 4.267 4.266 8.533 4.266H512V716.8c0 12.8 4.267 21.333 8.533 25.6 4.267 4.267 12.8 8.533 21.334 8.533 12.8 0 21.333-4.266 25.6-8.533 4.266-4.267 4.266-12.8 4.266-25.6v-55.467H652.8c-8.533 25.6-12.8 51.2-12.8 76.8 0 140.8 115.2 256 256 256s256-115.2 256-256S1036.8 486.4 896 486.4zm-328.533-128h55.466c4.267 0 4.267 0 4.267 4.267V409.6h-59.733v-51.2zm0 102.4H627.2V512h-55.467v-51.2zM512 516.267h-55.467v-51.2H512v51.2zm0-102.4h-59.733V362.667H512v51.2zm384 499.2c-93.867 0-170.667-76.8-170.667-170.667S802.133 571.733 896 571.733s170.667 76.8 170.667 170.667S989.867 913.067 896 913.067z"/><path fill="#fff" d="M951.467 669.867 878.933 742.4l-29.866-25.6C832 699.733 806.4 704 789.333 721.067c-17.066 17.066-12.8 42.666 4.267 59.733l59.733 51.2c8.534 8.533 17.067 8.533 29.867 8.533s21.333-4.266 29.867-12.8l102.4-102.4c17.066-17.066 17.066-42.666 0-59.733-21.334-12.8-46.934-12.8-64 4.267zm-371.2 209.066H213.333c-72.533 0-128-55.466-128-119.466V230.4c0-64 55.467-119.467 128-119.467h512c72.534 0 128 55.467 128 119.467v140.8c0 25.6 17.067 42.667 42.667 42.667s42.667-17.067 42.667-42.667V230.4c0-115.2-93.867-204.8-213.334-204.8h-512C93.867 25.6 0 119.467 0 230.4v529.067c0 115.2 93.867 204.8 213.333 204.8h366.934c25.6 0 42.666-17.067 42.666-42.667s-21.333-42.667-42.666-42.667z"/></svg>'},{}],"9UR3U":[function(p,y,c){y.exports='<svg viewBox="0 0 1152 1024" width="22" height="22" xmlns="http://www.w3.org/2000/svg"><path fill="#fff" d="M311.296 661.504c0 4.096-4.096 8.704-8.704 12.8 0 4.096 0 4.096-4.096 8.704h-12.8c-4.096 0-8.704-4.096-16.896-8.704-8.704-8.704-16.896-8.704-25.6-8.704s-12.8 4.096-16.896 12.8c-4.096 12.8-8.704 21.504-4.096 29.696 4.096 8.704 12.8 16.896 25.6 21.504 16.896 8.704 34.304 16.896 47.104 16.896 12.8 0 21.504-4.096 34.304-8.704 8.704-4.096 16.896-16.896 25.6-29.696s12.8-34.304 16.896-55.296c4.096-21.504 4.096-51.2 4.096-85.504 0-12.8 0-21.504-4.096-29.696 0-8.704-4.096-12.8-8.704-16.896-4.096-4.096-8.704-8.704-12.8-8.704s-12.8-4.096-21.504-4.096h-55.808s-4.096-4.096 0-8.704l4.096-38.4c0-4.096 0-8.704 4.096-8.704h47.104c16.896 0 25.6-4.096 34.304-12.8s12.8-21.504 12.8-42.496v-72.704c0-16.896-4.096-34.304-8.704-42.496-12.8-12.8-25.6-16.896-42.496-16.896H243.2c-8.704 0-16.896 0-21.504 4.096-4.096 8.704-4.096 12.8-4.096 25.6 0 8.704 0 16.896 4.096 21.504 4.096 4.096 12.8 8.704 21.504 8.704h64c4.096 0 8.704 0 8.704 4.096v34.304c0 8.704 0 12.8-4.096 12.8 0 0-4.096 4.096-8.704 4.096H268.8c-8.704 0-12.8 0-21.504 4.096-4.096 0-8.704 4.096-8.704 4.096-4.096 4.096-8.704 12.8-8.704 16.896 0 8.704-4.096 16.896-4.096 25.6l-8.704 72.704v29.696c0 8.704 4.096 12.8 8.704 16.896s8.704 4.096 16.896 8.704h68.096c4.096 0 8.704 0 8.704 4.096s4.096 8.704 4.096 16.896c0 21.504 0 42.496-4.096 55.296.512 9.216-3.584 22.016-8.192 26.624zM896 486.4c-93.696 0-175.104 51.2-217.6 123.904H571.904V576H640c21.504 0 34.304-4.096 42.496-12.8 8.704-8.704 12.8-21.504 12.8-42.496V358.4c0-21.504-4.096-34.304-12.8-42.496-8.704-8.704-21.504-12.8-42.496-12.8 0-4.096 4.096-4.096 4.096-8.704-4.096 0-4.096-4.096-4.096-4.096 4.096-12.8 8.704-21.504 4.096-25.6 0-8.704-4.096-12.8-12.8-21.504-8.704-4.096-16.896-4.096-21.504-4.096-8.704 4.096-12.8 8.704-21.504 21.504-4.096 8.704-8.704 12.8-12.8 21.504s-8.704 12.8-12.8 21.504h-51.2c-4.096-8.704-8.704-16.896-8.704-21.504-4.096-8.704-8.704-12.8-12.8-21.504-4.096-12.8-12.8-16.896-21.504-16.896s-16.896 0-25.6 8.704-12.8 12.8-12.8 21.504 0 16.896 8.704 25.6l4.096 4.096 4.096 4.096c-16.896 0-29.696 4.096-38.4 12.8-8.704 4.096-12.8 21.504-12.8 38.4v157.696c0 21.504 4.096 34.304 12.8 42.496 8.704 8.704 21.504 12.8 42.496 12.8H512v34.304h-98.304c-12.8 0-21.504 0-25.6 4.096s-8.704 8.704-8.704 21.504v16.896c0 4.096 4.096 8.704 4.096 8.704 4.096 0 4.096 4.096 8.704 4.096H512V716.8c0 12.8 4.096 21.504 8.704 25.6 4.096 4.096 12.8 8.704 21.504 8.704 12.8 0 21.504-4.096 25.6-8.704 4.096-4.096 4.096-12.8 4.096-25.6v-55.296H652.8c-8.704 25.6-12.8 51.2-12.8 76.8 0 140.8 115.2 256 256 256s256-115.2 256-256S1036.8 486.4 896 486.4zm-328.704-128h55.296c4.096 0 4.096 0 4.096 4.096V409.6h-59.904v-51.2zm0 102.4H627.2V512h-55.296v-51.2h-4.608zM512 516.096h-55.296v-51.2H512v51.2zm0-102.4h-59.904v-51.2H512v51.2zm384 499.2c-93.696 0-170.496-76.8-170.496-170.496S802.304 571.904 896 571.904s170.496 76.8 170.496 170.496S989.696 912.896 896 912.896z"/><path fill="#fff" d="M580.096 879.104H213.504c-72.704 0-128-55.296-128-119.296V230.4c0-64 55.296-119.296 128-119.296h512c72.704 0 128 55.296 128 119.296v140.8c0 25.6 16.896 42.496 42.496 42.496s42.496-16.896 42.496-42.496V230.4c0-115.2-93.696-204.8-213.504-204.8h-512C93.696 25.6 0 119.296 0 230.4v528.896c0 115.2 93.696 204.8 213.504 204.8h367.104c25.6 0 42.496-16.896 42.496-42.496s-21.504-42.496-43.008-42.496zm171.52 10.752c-15.36-15.36-15.36-40.96 0-56.32l237.568-237.568c15.36-15.36 40.96-15.36 56.32 0s15.36 40.96 0 56.32L807.936 889.856c-15.36 15.36-40.448 15.36-56.32 0z"/></svg>'},{}],"4MPCW":[function(p,y,c){y.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M16.5 8c1.289 0 2.49.375 3.5 1.022V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7.022A6.5 6.5 0 0 1 16.5 8zM7 13H5a1 1 0 0 1 0-2h2a1 1 0 0 1 0 2zm2-4H5a1 1 0 0 1 0-2h4a1 1 0 0 1 0 2z"/><path d="m20.587 13.696-.787-.131a3.503 3.503 0 0 0-.593-1.051l.301-.804a.46.46 0 0 0-.21-.56l-1.005-.581a.52.52 0 0 0-.656.113l-.499.607a3.53 3.53 0 0 0-1.276 0l-.499-.607a.52.52 0 0 0-.656-.113l-1.005.581a.46.46 0 0 0-.21.56l.301.804c-.254.31-.456.665-.593 1.051l-.787.131a.48.48 0 0 0-.413.465v1.209a.48.48 0 0 0 .413.465l.811.135c.144.382.353.733.614 1.038l-.292.78a.46.46 0 0 0 .21.56l1.005.581a.52.52 0 0 0 .656-.113l.515-.626a3.549 3.549 0 0 0 1.136 0l.515.626a.52.52 0 0 0 .656.113l1.005-.581a.46.46 0 0 0 .21-.56l-.292-.78c.261-.305.47-.656.614-1.038l.811-.135A.48.48 0 0 0 21 15.37v-1.209a.48.48 0 0 0-.413-.465zM16.5 16.057a1.29 1.29 0 1 1 .002-2.582 1.29 1.29 0 0 1-.002 2.582z"/></svg>'},{}],"7lV5Q":[function(p,y,c){y.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" width="24" height="24"><path d="M17 16H5c-.55 0-1 .45-1 1s.45 1 1 1h12c.55 0 1-.45 1-1s-.45-1-1-1zM6.96 15c.39 0 .74-.24.89-.6l.65-1.6h5l.66 1.6c.15.36.5.6.89.6.69 0 1.15-.71.88-1.34l-3.88-8.97C11.87 4.27 11.46 4 11 4s-.87.27-1.05.69l-3.88 8.97c-.27.63.2 1.34.89 1.34zM11 5.98 12.87 11H9.13L11 5.98z"/></svg>'},{}],"8AxLD":[function(p,y,c){p("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(c);const r={map:(o,d,k,m,g)=>(o-d)*(g-m)/(k-d)+m,range(o,d,k){const m=Math.round(o/k)*k;return Array.from({length:Math.floor((d-o)/k)},(g,t)=>t*k+m)}};c.default=function(o,d,k){const{query:m}=o.constructor.utils;o.controls.add({name:"heatmap",position:"top",html:"",style:{position:"absolute",top:"-100px",left:"0px",right:"0px",height:"100px",width:"100%",pointerEvents:"none"},mounted(g){let t=null,e=null;function i(){if(t=null,e=null,g.innerHTML="",!d.danmus.length||!o.duration)return;const n={w:g.offsetWidth,h:g.offsetHeight},a={xMin:0,xMax:n.w,yMin:0,yMax:128,scale:.25,opacity:.2,minHeight:Math.floor(.05*n.h),sampling:Math.floor(n.w/100),smoothing:.2,flattening:.2};typeof k=="object"&&Object.assign(a,k);const s=[],u=o.duration/n.w;for(let h=0;h<=n.w;h+=a.sampling){const M=d.danmus.filter(({time:w})=>w>h*u&&w<=(h+a.sampling)*u).length;s.push([h,M])}const l=s[s.length-1],v=l[0],$=l[1];v!==n.w&&s.push([n.w,$]);const x=s.map(h=>h[1]),C=(Math.min(...x)+Math.max(...x))/2;for(let h=0;h<s.length;h++){const M=s[h],w=M[1];M[1]=w*(w>C?1+a.scale:1-a.scale)+a.minHeight}const z=(h,M,w,H)=>{const T=((F,f)=>{const D=f[0]-F[0],_=f[1]-F[1];return{length:Math.sqrt(Math.pow(D,2)+Math.pow(_,2)),angle:Math.atan2(_,D)}})(M||h,w||h),A=r.map(Math.cos(T.angle)*a.flattening,0,1,1,0),B=T.angle*A+(H?Math.PI:0),j=T.length*a.smoothing;return[h[0]+Math.cos(B)*j,h[1]+Math.sin(B)*j]},S=s.map(h=>[r.map(h[0],a.xMin,a.xMax,0,n.w),r.map(h[1],a.yMin,a.yMax,n.h,0)]).reduce((h,M,w,H)=>w===0?`M ${H[H.length-1][0]},${n.h} L ${M[0]},${n.h} L ${M[0]},${M[1]}`:`${h} ${((T,A,B)=>{const j=z(B[A-1],B[A-2],T),F=z(T,B[A-1],B[A+1],!0),f=A===B.length-1?" z":"";return`C ${j[0]},${j[1]} ${F[0]},${F[1]} ${T[0]},${T[1]}${f}`})(M,w,H)}`,"");g.innerHTML=`<svg viewBox="0 0 ${n.w} ${n.h}"><defs><linearGradient id="heatmap-solids" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${a.opacity}" /><stop offset="0%" style="stop-color:var(--art-theme);stop-opacity:${a.opacity}" id="heatmap-start" /><stop offset="0%" style="stop-color:var(--art-progress-color);stop-opacity:1" id="heatmap-stop" /><stop offset="100%" style="stop-color:var(--art-progress-color);stop-opacity:1" /></linearGradient></defs><path fill="url(#heatmap-solids)" d="${S}"></path></svg>`,t=m("#heatmap-start",g),e=m("#heatmap-stop",g),t.setAttribute("offset",100*o.played+"%"),e.setAttribute("offset",100*o.played+"%")}o.on("video:timeupdate",()=>{t&&e&&(t.setAttribute("offset",100*o.played+"%"),e.setAttribute("offset",100*o.played+"%"))}),o.on("setBar",(n,a)=>{t&&e&&n==="played"&&(t.setAttribute("offset",100*a+"%"),e.setAttribute("offset",100*a+"%"))}),o.on("ready",i),o.on("resize",i),o.on("artplayerPluginDanmuku:loaded",i)}})}},{"@parcel/transformer-js/src/esmodule-helpers.js":"9pCYc"}]},["bgm6t"],"bgm6t","parcelRequire4dc0")})(L,L.exports);var yt=L.exports;const kt=ft(yt);var vt=q('<div class="modal fade"id=renameModal tabindex=-1><div class=modal-dialog><div class=modal-content><div class=modal-header><h1 class="modal-title fs-5"id=exampleModalLabel>更改昵称</h1><button type=button class=btn-close data-bs-dismiss=modal></button></div><div class=modal-body><form name=rename class=input-group><input name=name type=text class=form-control placeholder=昵称></form></div><div class=modal-footer><button type=button class="btn btn-secondary"data-bs-dismiss=modal>关闭</button><button type=button class="btn btn-primary"data-bs-dismiss=modal>提交'),bt=q('<div class="container-md mt-4"id=container><div class=row><div class="col-md-10 col-sm-12 mb-3 player-wrapper"><div id=artplayer></div></div><div class="col-md-2 col-sm-12 mb-3 sidebar-wrapper"style=position:relative><div class="sidebar sidebar-message"><div class=mb-2><button type=button class="btn btn-primary"data-bs-toggle=modal data-bs-target=#renameModal>更改昵称</button><button type=button class="btn btn-primary ms-2">复制链接'),xt=q("<p>");function Mt(){rt(()=>import("./bootstrap.esm-73151a3d.js"),[]),O.CONTROL_HIDE_TIME=1e3;let{id:E}=st();const[V,p]=K([]),[y,c]=K("");function r(t){p([t,...V()])}function o(t){ws.readyState==ws.OPEN&&ws.send(JSON.stringify(t))}function d(){navigator.clipboard.writeText("http://eventloop.i234.me:6789/together/url/"+E)}function k(){const t=document.forms.rename.name.value;t===""||t===y()||(o({event:"rename",data:{previous:y(),now:t}}),r("我从 "+y()+" 改名为 "+t),c(t))}function m(){o({event:"play",data:art.currentTime}),r("我 开始了播放")}function g(){o({event:"pause",data:art.currentTime}),r("我 暂停了")}return dt.get("/together/url/"+E).catch(t=>(console.log(t.status),t.status,history.back())).then(t=>{t=t.data,c(t.name),r("当前在线 "+t.online.join(", ")),window.ws=new WebSocket(`ws://${location.host}/together/ws/${E}`),ws.onclose=async e=>{gt.fire({icon:"error",title:"Oops",text:"连接断开了, 请刷新页面"})},ws.onmessage=async e=>{const i=JSON.parse(e.data);art&&i.name!==y()&&(i.event==="danmu"&&(i.data.time=void 0,i.data.border=!1,art.plugins.artplayerPluginDanmuku.emit(i.data),r(i.name+" 发送弹幕 "+i.data.text)),i.event==="pause"&&(art.playing&&(art.off("pause",g),await art.pause(),art.currentTime=i.data,art.on("pause",g)),r(i.name+" 暂停了")),i.event==="seek"&&(art.currentTime=i.data,r(i.name+" 跳转到 "+artUtils.secondToTime(i.data))),i.event==="play"&&(art.playing||(art.off("play",m),await art.play(),art.currentTime=i.data,art.on("play",m)),r(i.name+" 开始了播放")),i.event==="join"&&r(i.name+" 加入了"),i.event==="leave"&&r(i.name+" 离开了"),i.event==="rename"&&r(i.data.previous+" 改名为 "+i.data.now))},ot(async()=>{window.artUtils=O.utils,window.art=new O({container:document.getElementById("artplayer"),url:t.url,screenshot:!0,theme:"#23ade5",fullscreen:!0,fullscreenWeb:!0,miniProgressBar:!0,pip:!0,useSSR:!0,poster:mt,plugins:[kt({danmuku:[],lockTime:0})],icons:{loading:`<div style="display:flex;flex-direction:column;align-items:center;"><img src="${pt}" width="24" height="24"/><span style="font-style:normal;">Loading</span></div>`,state:`<img width="150" heigth="150" src="${ct}"/>`,indicator:`<img width="16" heigth="16" src="${ht}"/>`}}),art.on("ready",()=>{art.currentTime=t.time}),art.on("resize",()=>{art.autoHeight()}),art.on("video:timeupdate",()=>{o({event:"timeupdate",data:art.currentTime})}),art.on("pause",g),art.on("play",m),art.on("seek",()=>{o({event:"seek",data:art.currentTime}),r("我 跳转到 "+artUtils.secondToTime(art.currentTime))}),art.on("artplayerPluginDanmuku:emit",e=>{o({event:"danmu",data:e}),r("我 发送弹幕 "+e.text)})})}),[(()=>{var t=vt(),e=t.firstChild,i=e.firstChild,n=i.firstChild,a=n.nextSibling,s=a.firstChild,u=s.firstChild,l=a.nextSibling,v=l.firstChild,$=v.nextSibling;return $.addEventListener("click",k),Q(()=>u.value=y()),t})(),(()=>{var t=bt(),e=t.firstChild,i=e.firstChild,n=i.firstChild,a=i.nextSibling,s=a.firstChild,u=s.firstChild,l=u.firstChild,v=l.nextSibling;return v.addEventListener("click",d),Z(s,lt(ut,{get each(){return V()},children:$=>(()=>{var x=xt();return Z(x,$),x})()}),null),Q(()=>n.innerHTML=O.html),t})()]}export{Mt as default};
//# sourceMappingURL=Together-69217427.js.map
